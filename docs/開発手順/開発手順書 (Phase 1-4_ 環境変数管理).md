

---

### **📘 開発手順書 (Phase 1-4: 環境変数管理)**

今回の作業ログです。

Markdown

\# 📘 メモアプリ開発手順書 (Phase 1-4: 環境変数管理)

本フェーズでは、セキュリティ向上と設定の柔軟性を確保するため、ハードコーディングされていた設定値（パスワードやポート番号）を環境変数 (\`.env\`) に切り出した。

\#\# 🛡️ 1\. .env ファイルの作成  
プロジェクトルートに \`.env\` を作成し、以下の機密情報を定義。  
\* \`POSTGRES\_USER\`, \`POSTGRES\_PASSWORD\`, \`POSTGRES\_DB\`  
\* \`DATABASE\_URL\` (Prisma用接続文字列)  
\* \`PORT\` (バックエンド起動ポート)

**\*\*注意:\*\*** \`.env\` は \`.gitignore\` に追加し、リポジトリにはコミットしないこと。

\#\# ⚙️ 2\. Docker Compose の修正  
\`docker-compose.yml\` 内の直接記述を \`${変数名}\` 形式に変更。  
これにより、\`.env\` の値をコンテナ起動時に読み込む構成となった。

\#\# 🔌 3\. アプリケーションコードの修正  
\`backend/index.ts\` (Hono) において、ポート番号を環境変数から取得するように変更。

\`\`\`typescript  
const PORT \= Number(process.env.PORT) || 8080;

## **✅ 4\. 成果**

* DBパスワード等の機密情報がコードベースから排除された。  
* ポート番号やDB接続先を、コードを書き換えずに変更できるようになった。  
* 本番環境（AWS等）へのデプロイ時に、環境変数だけで設定を切り替える準備が整った。

\---

\#\#\# 🚀 次のステップ

セキュリティの土台が固まりました。  
ロードマップの次は \*\*「1-5. バリデーション (Zod)」\*\* です。

現在は、メモのタイトルが空っぽでも、めちゃくちゃ長い文字でも保存できてしまいます。  
Zod（ゾド）というライブラリを使って、\*\*「変なデータは入り口で弾く」\*\* 仕組みを作りますか？  
